(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,n){},164:function(e,n){},188:function(e,n){},422:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},428:function(e,n,t){e.exports=t(893)},433:function(e,n,t){},867:function(e,n,t){},891:function(e,n){},893:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(218),i=t.n(r),c=(t(433),t(59)),l=t(88),s=t(93),u=t(89),d=t(94),m=t(43),p=t.n(m),f=t(219),h=t(111),g=t.n(h),w=t(414),v=(t(865),t(49)),b=t(903),y=(t(867),window.chrome),E=window.location.origin;y.identity&&(E=y.identity.getRedirectURL());var k={Auth:{identityPoolId:"ap-northeast-2:f7fdd6bf-dc3f-40a2-99f4-56351072c3bf",region:"ap-northeast-2",identityPoolRegion:"ap-northeast-2",userPoolId:"ap-northeast-2_dOcKtjnwU",userPoolWebClientId:"5qbr4et22vf5pb8m5k0j7kp9u7",mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH",oauth:{domain:"ezmote.auth.ap-northeast-2.amazoncognito.com",scope:["email","openid","aws.cognito.signin.user.admin","profile"],redirectSignIn:E,redirectSignOut:E,responseType:"code",options:{AdvancedSecurityDataCollectionFlag:!0}}}},O=t(904),_=t(143),A=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG,j=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG_TOAST,C=new function e(){Object(c.a)(this,e),this.info=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];A&&console.log.apply(console,n),j&&Object(_.toast)(JSON.stringify(n))},this.log=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];A&&console.log.apply(console,n),j&&Object(_.toast)(JSON.stringify(n))},this.debug=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];A&&console.log.apply(console,n),j&&Object(_.toast)(JSON.stringify(n))}},S=o.a.createElement(_.ToastContainer,{autoClose:3e3,hideProgressBar:!0}),W=window.chrome,I=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(o)))).oAuthLogin=function(){if(W.identity){var e=W.identity.getRedirectURL();W.identity.launchWebAuthFlow({url:function(e){return"https://ezmote.auth.ap-northeast-2.amazoncognito.com/login?response_type=code&client_id=5qbr4et22vf5pb8m5k0j7kp9u7&scope=aws.cognito.signin.user.admin+email+openid+profile&redirect_uri=".concat(e)}(e+""),interactive:!0},function(e){W.identity.getProfileUserInfo(function(e){return console.log(e)}),W.identity.getAuthToken({},function(e){return console.log(e)}),m.Auth._cognitoAuthClient.parseCognitoWebResponse(e)})}},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(O.a,{onClick:this.oAuthLogin},"Login"))}}]),n}(a.Component),N=t(420),T=t(50),U=t.n(T),x="mutation Command($command: String!, $amount: Float) {\n  command(command: $command, amount: $amount) {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n",R=function(e){return Object(N.a)(e),o.a.createElement(v.Query,{query:U()("query Me {\n  me {\n    cognitoId\n    id\n    username\n    registered\n  }\n}\n"),pollInterval:6e5},function(e){var n=e.loading,t=e.error,a=e.data;if(console.log(n,t,a),console.log(C),C.log(n,t,a),n)return"Loading...";if(t)return"Error!: ".concat(t);var r=a.me||{};return o.a.createElement(v.Mutation,{mutation:U()("mutation Join {\n  join {\n    cognitoId\n    id\n    username\n    registered\n  }\n}\n"),optimisticResponse:{}},function(e,n){var t=n.loading,a=n.error;console.log(e,t,a);var i=o.a.createElement("input",{value:r.username,ref:function(e){i=e}});return o.a.createElement("div",{className:"ui clearing basic segment"},o.a.createElement("form",{onSubmit:function(n){console.log(n),n.preventDefault(),e({variables:{name:i.value}}),i.value=""}},o.a.createElement("h1",{className:"ui header left floated"},"Profile"),o.a.createElement("p",{className:"header"},i,r.username||"hello"),o.a.createElement("button",{type:"submit"},"Update Profile")))})})},L=t(44),P=t.n(L),q=t(95),B=(t(890),t(425)),z=t(902),F=t(421),J=t.n(F);var M=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).watchingComponent=function(e,n,a){return e&&o.a.createElement(z.a,null,o.a.createElement(z.a,null,o.a.createElement("h4",null,"Watching: ",e.title," ",function(e){var n="";return(e=Math.floor(e))>3600&&(n+=Math.floor(e/60/60)+":"),n+=Math.floor(e/60)+":",n+=J.a.padStart(e%60,2,"0")}(e.timestamp))),o.a.createElement(z.a,null,o.a.createElement(O.a,{onClick:t.handleClickBackward},"backward"),o.a.createElement(O.a,{onClick:t.handleClickForward},"forward"),o.a.createElement(O.a,{onClick:t.handleClickNext},"next")))},t.handleClickBackward=Object(q.a)(P.a.mark(function e(){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:U()(x),variables:{command:"backward",amount:5}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.handleClickForward=Object(q.a)(P.a.mark(function e(){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:U()(x),variables:{command:"forward",amount:5}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.handleClickNext=Object(q.a)(P.a.mark(function e(){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:U()(x),variables:{command:"next",amount:1}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.showWatch=function(e,n){return t.watch=n,t.client=e,t.watchingComponent(n)},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(v.ApolloConsumer,null,function(n){return o.a.createElement(B.a,{subscription:U()("subscription SubscribeToUpdateWatch {\n  subscribeToUpdateWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var a=t.data;return t.loading?o.a.createElement(v.Query,{query:U()("query GetWatch {\n  getWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var a=t.loading,o=(t.error,t.data);return!a&&o?e.showWatch(n,o.getWatch):null}):e.showWatch(n,a.subscribeToUpdateWatch)})})}}]),n}(a.Component),D={aws_appsync_graphqlEndpoint:"https://axlvk4nfzbf5fnfmpqo37uzdey.appsync-api.ap-northeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"null"},H=t(422),$=t.n(H),G=(t(891),new g.a({url:D.aws_appsync_graphqlEndpoint,region:D.aws_appsync_region,auth:{type:D.aws_appsync_authenticationType,apiKey:D.apiKey,jwtToken:function(){var e=Object(q.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Auth.currentSession();case 2:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}));window.chrome;p.a.configure(D),p.a.configure(k);var K=function(e){function n(){return Object(c.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(b.a,null,o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:$.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},"Welcome to EzMote")),S,o.a.createElement(R,null),o.a.createElement(M,null)))}}]),n}(a.Component),Q=Object(f.withAuthenticator)(K,!0,[o.a.createElement(I,null),o.a.createElement(f.FederatedSignIn,null)],{}),V=function(){return o.a.createElement(v.ApolloProvider,{client:G},o.a.createElement(w.Rehydrated,null,o.a.createElement(Q,null)))},Z=new m.Logger("Alexander_the_auth_watcher");Z.onHubCapsule=function(e){switch(C.log(e),e.payload.event){case"signIn":Z.error("user signed in");break;case"signUp":Z.error("user signed up");break;case"signOut":Z.error("user signed out");break;case"signIn_failure":Z.error("user sign in failed");break;case"configured":Z.error("the Auth module is configured")}},m.Hub.listen("auth",Z);var X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(V,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");X?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Y(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Y(e)})}}()}},[[428,2,1]]]);
//# sourceMappingURL=main.8de9d1cb.chunk.js.map