(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t){},170:function(e,t){},189:function(e,t){},421:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},427:function(e,t,n){e.exports=n(894)},432:function(e,t,n){},867:function(e,t,n){},891:function(e,t){},894:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(219),i=n.n(o),c=(n(432),n(48)),l=n(73),u=n(77),s=n(74),p=n(78),d=n(50),m=n.n(d),h=n(311),f=n(111),g=n.n(f),b=n(414),w=n(154),v=n.n(w),y=n(49),E=n(903),O=(n(865),n(867),n(43)),k=n.n(O),j=n(95),_={aws_appsync_graphqlEndpoint:"https://axlvk4nfzbf5fnfmpqo37uzdey.appsync-api.ap-northeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"null"},A=new g.a({url:_.aws_appsync_graphqlEndpoint,region:_.aws_appsync_region,auth:{type:_.aws_appsync_authenticationType,apiKey:_.apiKey,jwtToken:function(){var e=Object(j.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Auth.currentSession();case 2:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}),I=window.chrome,C=window.location.origin;I.identity&&(C=I.identity.getRedirectURL());var S={Auth:{identityPoolId:"ap-northeast-2:f7fdd6bf-dc3f-40a2-99f4-56351072c3bf",region:"ap-northeast-2",identityPoolRegion:"ap-northeast-2",userPoolId:"ap-northeast-2_dOcKtjnwU",userPoolWebClientId:"5qbr4et22vf5pb8m5k0j7kp9u7",mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH",oauth:{domain:"ezmote.auth.ap-northeast-2.amazoncognito.com",scope:["email","openid","aws.cognito.signin.user.admin","profile"],redirectSignIn:C,redirectSignOut:C,responseType:"code",options:{AdvancedSecurityDataCollectionFlag:!0}}}},T=n(904),U=n(112),N=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG,x=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG_TOAST,R=new function e(){Object(c.a)(this,e),this.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];N&&console.log.apply(console,t),x&&Object(U.toast)(JSON.stringify(t))},this.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];N&&console.log.apply(console,t),x&&Object(U.toast)(JSON.stringify(t))},this.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];N&&console.log.apply(console,t),x&&Object(U.toast)(JSON.stringify(t))}},W=r.a.createElement(U.ToastContainer,{autoClose:3e3,hideProgressBar:!0}),P=window.chrome,L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).oAuthLogin=function(){if(P.identity){var e=P.identity.getRedirectURL();P.identity.launchWebAuthFlow({url:function(e){return"https://ezmote.auth.ap-northeast-2.amazoncognito.com/login?response_type=code&client_id=5qbr4et22vf5pb8m5k0j7kp9u7&scope=aws.cognito.signin.user.admin+email+openid+profile&redirect_uri=".concat(e)}(e+""),interactive:!0},function(e){P.identity.getProfileUserInfo(function(e){return console.log(e)}),P.identity.getAuthToken({},function(e){return console.log(e)}),d.Auth._cognitoAuthClient.parseCognitoWebResponse(e)})}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{onClick:this.oAuthLogin},"Login"))}}]),t}(a.Component),q=n(420),z=n(51),B=n.n(z),D="mutation Command($command: String!, $amount: Float) {\n  command(command: $command, amount: $amount) {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    timestamp\n    command\n    amount\n  }\n}\n",F=function(e){return Object(q.a)(e),r.a.createElement(y.Query,{query:B()("query Me {\n  me {\n    id\n    username\n    registered\n  }\n}\n"),pollInterval:6e5},function(e){var t=e.loading,n=e.error,a=e.data;if(R.log(t,n,a),t)return"Loading...";if(n)return"Error!: ".concat(n);var o=a.me||{};return r.a.createElement(y.Mutation,{mutation:B()("mutation Join {\n  join {\n    id\n    username\n    registered\n  }\n}\n"),optimisticResponse:{}},function(e,t){var n=t.loading,a=t.error;console.log(e,n,a);var i=r.a.createElement("input",{value:o.username,ref:function(e){i=e}});return r.a.createElement("div",{className:"ui clearing basic segment"},r.a.createElement("form",{onSubmit:function(t){console.log(t),t.preventDefault(),e({variables:{name:i.value}}),i.value=""}},r.a.createElement("h1",{className:"ui header left floated"},"Profile"),r.a.createElement("p",{className:"header"},i,o.username||"hello"),r.a.createElement("button",{type:"submit"},"Update Profile")))})})},J=(n(890),n(424)),M=n(902);var H=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).setInterval=function(e){n.clearInterval(),n.intervalId=setInterval(e,1e3)},n.clearInterval=function(){n.intervalId&&clearInterval(n.intervalId),n.intervalId=null},n.handleClickBackward=Object(j.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:B()(D),variables:{command:"backward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),n.handleClickForward=Object(j.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:B()(D),variables:{command:"forward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),n.handleClickNext=Object(j.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:B()(D),variables:{command:"next",amount:1}});case 2:case"end":return e.stop()}},e,this)})),n.state={watch:e.watch},n.setupTimer(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.watch.updatedAt!==t.watch.updatedAt&&(console.log("componentDidUpdate:",this.props.watch),this.setState({watch:this.props.watch}),this.clearInterval(),this.setupTimer())}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"setupTimer",value:function(){var e=this,t=this.state.watch;"playing"===t.state||"willplay"===t.state?this.setInterval(function(){e.state.watch.timestamp+=1,e.setState({watch:e.state.watch})}):this.clearInterval()}},{key:"render",value:function(){var e=this.state.watch;return e&&r.a.createElement(M.a,null,r.a.createElement(M.a,null,r.a.createElement("h4",null,"Watching: ",e.title," (",e.state,") ",function(e){var t="";return(e=Math.floor(e))>3600&&(t+=Math.floor(e/60/60)+":"),t+=Math.floor(e/60)+":",t+=v.a.padStart(e%60,2,"0")}(e.timestamp))),r.a.createElement(M.a,null,r.a.createElement(T.a,{onClick:this.handleClickBackward},"backward"),r.a.createElement(T.a,{onClick:this.handleClickForward},"forward"),r.a.createElement(T.a,{onClick:this.handleClickNext},"next")))}}]),t}(a.Component),G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(y.ApolloConsumer,null,function(e){return r.a.createElement(J.a,{subscription:B()("subscription SubscribeToUpdateWatch {\n  subscribeToUpdateWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var n=t.data;return t.loading?r.a.createElement(y.Query,{query:B()("query GetWatch {\n  getWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var n=t.loading,a=(t.error,t.data);return!n&&a?r.a.createElement(H,{client:e,watch:a.getWatch}):null}):r.a.createElement(H,{client:e,watch:n.subscribeToUpdateWatch})})})}}]),t}(a.Component),K=n(421),$=n.n(K),Q=(n(891),window.chrome);m.a.configure(_),m.a.configure(S);var V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:$.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Welcome to EzMote")),W,r.a.createElement(F,null),r.a.createElement(G,null)))}}]),t}(a.Component),Z=Object(h.withAuthenticator)(V,!0,[r.a.createElement(L,null),r.a.createElement(h.FederatedSignIn,null)],{}),X=function(){return r.a.createElement(y.ApolloProvider,{client:A},r.a.createElement(b.Rehydrated,null,r.a.createElement(Z,null)))},Y=new d.Logger("Alexander_the_auth_watcher");Y.onHubCapsule=function(e){switch(R.log(e),v.a.get(Q,"runtime,reload",function(){})(),e.payload.event){case"signIn":Y.error("user signed in");break;case"signUp":Y.error("user signed up");break;case"signOut":Y.error("user signed out");break;case"signIn_failure":Y.error("user sign in failed");break;case"configured":Y.error("the Auth module is configured")}},d.Hub.listen("auth",Y),i.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[427,2,1]]]);
//# sourceMappingURL=main.609835f2.chunk.js.map