(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,n){},165:function(e,n){},189:function(e,n){},421:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},427:function(e,n,t){e.exports=t(893)},432:function(e,n,t){},867:function(e,n,t){},891:function(e,n){},893:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(219),i=t.n(r),c=(t(432),t(59)),l=t(89),u=t(94),s=t(90),d=t(95),m=t(49),p=t.n(m),f=t(220),h=t(112),g=t.n(h),w=t(414),v=t(149),b=t.n(v),y=t(48),E=t(903),k=(t(865),t(867),t(43)),O=t.n(k),_=t(96),A={aws_appsync_graphqlEndpoint:"https://axlvk4nfzbf5fnfmpqo37uzdey.appsync-api.ap-northeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"null"},j=new g.a({url:A.aws_appsync_graphqlEndpoint,region:A.aws_appsync_region,auth:{type:A.aws_appsync_authenticationType,apiKey:A.apiKey,jwtToken:function(){var e=Object(_.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Auth.currentSession();case 2:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}),C=window.chrome,S=window.location.origin;C.identity&&(S=C.identity.getRedirectURL());var W={Auth:{identityPoolId:"ap-northeast-2:f7fdd6bf-dc3f-40a2-99f4-56351072c3bf",region:"ap-northeast-2",identityPoolRegion:"ap-northeast-2",userPoolId:"ap-northeast-2_dOcKtjnwU",userPoolWebClientId:"5qbr4et22vf5pb8m5k0j7kp9u7",mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH",oauth:{domain:"ezmote.auth.ap-northeast-2.amazoncognito.com",scope:["email","openid","aws.cognito.signin.user.admin","profile"],redirectSignIn:S,redirectSignOut:S,responseType:"code",options:{AdvancedSecurityDataCollectionFlag:!0}}}},N=t(904),T=t(113),U=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG,I=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG_TOAST,x=new function e(){Object(c.a)(this,e),this.info=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];U&&console.log.apply(console,n),I&&Object(T.toast)(JSON.stringify(n))},this.log=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];U&&console.log.apply(console,n),I&&Object(T.toast)(JSON.stringify(n))},this.debug=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];U&&console.log.apply(console,n),I&&Object(T.toast)(JSON.stringify(n))}},R=o.a.createElement(T.ToastContainer,{autoClose:3e3,hideProgressBar:!0}),L=window.chrome,P=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(o)))).oAuthLogin=function(){if(L.identity){var e=L.identity.getRedirectURL();L.identity.launchWebAuthFlow({url:function(e){return"https://ezmote.auth.ap-northeast-2.amazoncognito.com/login?response_type=code&client_id=5qbr4et22vf5pb8m5k0j7kp9u7&scope=aws.cognito.signin.user.admin+email+openid+profile&redirect_uri=".concat(e)}(e+""),interactive:!0},function(e){L.identity.getProfileUserInfo(function(e){return console.log(e)}),L.identity.getAuthToken({},function(e){return console.log(e)}),m.Auth._cognitoAuthClient.parseCognitoWebResponse(e)})}},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(N.a,{onClick:this.oAuthLogin},"Login"))}}]),n}(a.Component),q=t(420),B=t(50),z=t.n(B),F="mutation Command($command: String!, $amount: Float) {\n  command(command: $command, amount: $amount) {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n",J=function(e){return Object(q.a)(e),o.a.createElement(y.Query,{query:z()("query Me {\n  me {\n    id\n    username\n    registered\n  }\n}\n"),pollInterval:6e5},function(e){var n=e.loading,t=e.error,a=e.data;if(x.log(n,t,a),n)return"Loading...";if(t)return"Error!: ".concat(t);var r=a.me||{};return o.a.createElement(y.Mutation,{mutation:z()("mutation Join {\n  join {\n    id\n    username\n    registered\n  }\n}\n"),optimisticResponse:{}},function(e,n){var t=n.loading,a=n.error;console.log(e,t,a);var i=o.a.createElement("input",{value:r.username,ref:function(e){i=e}});return o.a.createElement("div",{className:"ui clearing basic segment"},o.a.createElement("form",{onSubmit:function(n){console.log(n),n.preventDefault(),e({variables:{name:i.value}}),i.value=""}},o.a.createElement("h1",{className:"ui header left floated"},"Profile"),o.a.createElement("p",{className:"header"},i,r.username||"hello"),o.a.createElement("button",{type:"submit"},"Update Profile")))})})},M=(t(890),t(424)),D=t(902);var H=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).watchingComponent=function(e,n,a){return e&&o.a.createElement(D.a,null,o.a.createElement(D.a,null,o.a.createElement("h4",null,"Watching: ",e.title," ",function(e){var n="";return(e=Math.floor(e))>3600&&(n+=Math.floor(e/60/60)+":"),n+=Math.floor(e/60)+":",n+=b.a.padStart(e%60,2,"0")}(e.timestamp))),o.a.createElement(D.a,null,o.a.createElement(N.a,{onClick:t.handleClickBackward},"backward"),o.a.createElement(N.a,{onClick:t.handleClickForward},"forward"),o.a.createElement(N.a,{onClick:t.handleClickNext},"next")))},t.handleClickBackward=Object(_.a)(O.a.mark(function e(){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:z()(F),variables:{command:"backward",amount:5}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.handleClickForward=Object(_.a)(O.a.mark(function e(){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:z()(F),variables:{command:"forward",amount:5}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.handleClickNext=Object(_.a)(O.a.mark(function e(){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.mutate({mutation:z()(F),variables:{command:"next",amount:1}});case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}},e,this)})),t.showWatch=function(e,n){return t.watch=n,t.client=e,t.watchingComponent(n)},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(y.ApolloConsumer,null,function(n){return o.a.createElement(M.a,{subscription:z()("subscription SubscribeToUpdateWatch {\n  subscribeToUpdateWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var a=t.data;return t.loading?o.a.createElement(y.Query,{query:z()("query GetWatch {\n  getWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    timestamp\n    command\n    amount\n  }\n}\n")},function(t){var a=t.loading,o=(t.error,t.data);return!a&&o?e.showWatch(n,o.getWatch):null}):e.showWatch(n,a.subscribeToUpdateWatch)})})}}]),n}(a.Component),$=t(421),G=t.n($),K=(t(891),window.chrome);p.a.configure(A),p.a.configure(W);var Q=function(e){function n(){return Object(c.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(E.a,null,o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:G.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},"Welcome to EzMote")),R,o.a.createElement(J,null),o.a.createElement(H,null)))}}]),n}(a.Component),V=Object(f.withAuthenticator)(Q,!0,[o.a.createElement(P,null),o.a.createElement(f.FederatedSignIn,null)],{}),Z=function(){return o.a.createElement(y.ApolloProvider,{client:j},o.a.createElement(w.Rehydrated,null,o.a.createElement(V,null)))},X=new m.Logger("Alexander_the_auth_watcher");X.onHubCapsule=function(e){switch(x.log(e),b.a.get(K,"runtime,reload",function(){})(),e.payload.event){case"signIn":X.error("user signed in");break;case"signUp":X.error("user signed up");break;case"signOut":X.error("user signed out");break;case"signIn_failure":X.error("user sign in failed");break;case"configured":X.error("the Auth module is configured")}},m.Hub.listen("auth",X);var Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(Z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Y?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ee(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ee(e)})}}()}},[[427,2,1]]]);
//# sourceMappingURL=main.5beefb58.chunk.js.map